version: '2'
services:

  mongodb:
    image: <%= mongodb_image %>
    mem_reservation: 64m
    mem_limit: 192m
    container_name: lbmesh-db-mongodb
    volumes:
      - '<%= homedir_data %>:/data/db'
      - '<%= homedir_config %>:/data/configdb'
    ports:
        - '<%= mongodb_port %>:27017'
    networks:
      - lbmesh-db-mongodb
    command: mongod

  mongodb-express:
    image: <%= mongodb_admin_image %>
    container_name: lbmesh-admin-mongodb
    mem_reservation: 32m
    mem_limit: 128m
    environment:
      - ME_CONFIG_MONGODB_SERVER=mongodb
    ports:
      - '<%= mongodb_admin_port %>:8081'
    networks: 
      - lbmesh-db-mongodb

networks:
  lbmesh-db-mongodb: