version: '2'
services:

  couchdb:
    container_name: 'lbmesh-db-couchdb'
    image: 'couchdb'
    mem_limit: 64m
    mem_reservation: 256m
    ports:
      - '<%= couchdb_port %>:5984'
    volumes:
      - '<%= couchdb_data %>:/opt/couchdb/data'
      - '<%= couchdb_config %>:/opt/couchdb/etc/local.d'
      - '<%= couchdb_log %>:/opt/couchdb/log'
    environment:
      - 'COUCHDB_USER=<%= couchdb_env_user %>'
      - 'COUCHDB_PASSWORD=<%= couchdb_env_pass %>'
    networks:
      - lbmesh-db-couchdb

networks:
  lbmesh-db-couchdb: